(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{103:function(e,t,n){"use strict";var a=n(0),o=n.n(a),s={MY_DOCUMENTS:"My Documents",SHARED_WITH_ME:"Shared with me",SEARCH:"Search results"};t.a=function(e){var t=e.view?s[e.view]:e.label;return o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement("h2",null,o.a.createElement("a",{className:"root",href:"#"},t),e.path&&e.path.map(function(e){return o.a.createElement("a",{className:"folder",href:"#".concat(e.id),key:e.id},e.title)})),null!==e.docCount&&void 0!==e.docCount&&o.a.createElement("span",{className:"count"},"(".concat(e.docCount,")")),e.children)}},104:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(140),m=n.n(u),p=n(141),d={editing:!1,modifiedContent:null},h=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={},n.onKeydown=function(e){27===e.which?n.onCancel():e.ctrlKey&&13===e.which&&n.onSave()},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"onEdit",value:function(){document.addEventListener("keydown",this.onKeydown,!1),this.setState({editing:!0})}},{key:"onChange",value:function(e,t){this.setState({modifiedContent:t})}},{key:"onDelete",value:function(){document.removeEventListener("keydown",this.onKeydown,!1),this.props.onDelete&&this.props.onDelete()}},{key:"onSave",value:function(){document.removeEventListener("keydown",this.onKeydown,!1),this.props.onUpdate&&this.props.onUpdate(this.state.modifiedContent),this.setState(d)}},{key:"onCancel",value:function(){document.removeEventListener("keydown",this.onKeydown,!1),"boolean"===typeof this.props.content?this.onDelete():this.setState(d)}},{key:"renderView",value:function(e){return l.a.createElement("div",{className:"readme"},l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"textbox"},l.a.createElement(m.a,{source:e})),this.props.onUpdate&&this.props.onDelete&&l.a.createElement("span",{className:"buttons modify"},l.a.createElement("button",{className:"icon nostyle",title:"Edit",onClick:this.onEdit.bind(this)},"\uf040"))))}},{key:"renderEdit",value:function(e){return l.a.createElement("div",{className:"readme editing"},l.a.createElement("div",{className:"wrapper"},l.a.createElement(p.a,{tagName:"div",className:"textbox",content:e,editable:!0,multiLine:!0,onChange:this.onChange.bind(this)}),l.a.createElement("div",{className:"editbar"},l.a.createElement("span",{className:"hint"},"Supports styling with ",l.a.createElement("a",{href:"# "},"Markdown")),l.a.createElement("span",{className:"buttons"},l.a.createElement("button",{className:"label nostyle",onClick:this.onDelete.bind(this)},"Delete description"),l.a.createElement("button",{className:"icon nostyle",onClick:this.onSave.bind(this)},"\uf00c"),l.a.createElement("button",{className:"icon nostyle",onClick:this.onCancel.bind(this)},"\uf00d")))))}},{key:"render",value:function(){var e="boolean"===typeof this.props.content;e&&document.addEventListener("keydown",this.onKeydown,!1);var t=e?"":this.state.modifiedContent?this.state.modifiedContent:this.props.content;return this.state.editing||e?this.renderEdit(t):this.renderView(t)}}]),t}(c.Component)},105:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(58),m=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"formatURL",value:function(e){return e.replace(/^https?:\/\//i,"")}},{key:"render",value:function(){var e=this.props.account&&this.props.account.username&&this.props.account.member_since;return l.a.createElement("div",{className:"identity"},l.a.createElement("div",{className:"user"},l.a.createElement(u.a,{username:e&&this.props.account.username}),l.a.createElement("h1",null,e?this.props.account.real_name?this.props.account.real_name:this.props.account.username:l.a.createElement("span",{className:"placeholder"})),l.a.createElement("p",{className:"member-since"},e?l.a.createElement(l.a.Fragment,null,"Joined on ",new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(this.props.account.member_since))):l.a.createElement("span",{className:"placeholder"}))),l.a.createElement("div",{className:"user-extended"},e&&this.props.account.bio&&l.a.createElement("p",{className:"bio"},this.props.account.bio),e&&this.props.account.website&&l.a.createElement("p",{className:"homepage"},l.a.createElement("a",{href:this.props.account.website},this.formatURL(this.props.account.website)))))}}]),t}(c.Component)},106:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(321),m=n(320),p=n(152),d=n(153),h=n(35),f=n.n(h),v={stroke:"#c2c2c2",strokeWidth:1},b={fontSize:"12px",color:"#3f3f3f"},g=function(e){return new Intl.DateTimeFormat("en-GB",{month:"short"}).format(new Date(e))},y=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"createEmptySeries",value:function(e,t){var n=new Array(e);return n.fill(0),n.reduce(function(e,t){var n=e[e.length-1];return e.push(n-6048e5),e},[t-6048e5]).reverse().map(function(e){return{timestamp:e,value:0}})}},{key:"padTimeseries",value:function(e){var t=e.length>0?e[0].timestamp:(new Date).getTime();return this.createEmptySeries(19-e.length,t).concat(e)}},{key:"computeChart",value:function(){var e=this.props.stats.over_time.map(function(e){return{timestamp:Date.parse(e.date),value:e.value}});return e.length<20?this.padTimeseries(e):e}},{key:"render",value:function(){return l.a.createElement("div",{className:this.props.className?"activity-widget ".concat(this.props.className):"activity-widget"},l.a.createElement("h2",null,"Activity",this.props.stats&&l.a.createElement("span",{className:"count"},l.a.createElement(f.a,{displayType:"text",value:this.props.stats.total_contributions,thousandSeparator:!0})," edits")),this.props.stats&&l.a.createElement(u.a,{width:this.props.width,height:this.props.height,barCategoryGap:1.5,data:this.computeChart()},l.a.createElement(m.a,{strokeDasharray:"3",horizontal:!1}),l.a.createElement(p.a,{type:"number",dataKey:"timestamp",axisLine:v,tick:b,tickSize:4,tickCount:6,tickLine:v,tickFormatter:g,height:20,domain:["dataMin","dataMax"],padding:{left:5,right:5}}),l.a.createElement(d.a,{dataKey:"value",fill:this.props.fill})))}}]),t}(c.Component)},107:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(10),m=n.n(u),p=n(58),d=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={collaborators:null},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(){this.fetchCollaborators()}},{key:"fetchCollaborators",value:function(){var e=this;this.props.username&&!this.state.collaborators&&m.a.get("/api/account/".concat(this.props.username,"/collaborators")).then(function(t){return e.setState({collaborators:t.data})})}},{key:"render",value:function(){var e=this.state.collaborators;return l.a.createElement(l.a.Fragment,null,e&&e.length>0&&l.a.createElement("div",{className:this.props.className?"collaborator-list ".concat(this.props.className):"collaborator-list"},l.a.createElement("h2",null,this.props.title),l.a.createElement("ul",null,this.state.collaborators.map(function(e){return l.a.createElement("li",{key:e.username},l.a.createElement("a",{href:"/".concat(e.username),title:e.username},l.a.createElement(p.a,{username:e.username})))}))))}}]),t}(c.Component)},108:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(40),m=n(69),p=n(55),d=n(35),h=n.n(d),f=n(91),v=n.n(f),b=n(77),g=n(23),y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(r.a)(t).call(this,e))).updateTotalRowSpan(e),n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.updateTotalRowSpan(e)}},{key:"updateTotalRowSpan",value:function(e){this._totalSpan=e.columns.reduce(function(e,t){return e+g.b.getSpan(t)},0)}},{key:"getWidth",value:function(e){return g.b.getSpan(e)/this._totalSpan}}]),t}(c.Component),E={language:function(e){return e.toUpperCase()},uploaded_at:function(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(e))},last_edit_at:function(e){return l.a.createElement(v.a,{date:e})},my_last_edit_at:function(e){return l.a.createElement(v.a,{date:e})},public_visibility:function(e){return"PUBLIC"===e?l.a.createElement("span",{className:"icon",title:"Open to anyone"},"\uf09c"):"WITH_LINK"===e?l.a.createElement("span",{className:"icon",title:"Open to anyone with the link"},"\uf0c1"):l.a.createElement("span",{className:"icon",title:"Private"},"\uf023")},access_level:function(e){return"ADMIN"===e?l.a.createElement("span",{className:"icon",title:"ADMIN"},"\uf0ad"):"WRITE"===e?l.a.createElement("span",{className:"icon",title:"WRITE"},"\uf040"):l.a.createElement("span",{className:"icon",title:"READ"},"\uf06e")},annotations:function(e){return l.a.createElement(h.a,{displayType:"text",value:e,thousandSeparator:!0})},my_annotations:function(e){return l.a.createElement(h.a,{displayType:"text",value:e,thousandSeparator:!0})},status_ratio:function(e){var t=e.verified+e.unverified+e.not_identifiable,n=e.verified/t*100,a=e.not_identifiable/t*100,o={verified:"verified",unverified:"unverified",not_identifiable:"flagged"},s=["verified","unverified","not_identifiable"].reduce(function(t,n){var a=e[n];return 0===a?t:"".concat(t," ").concat(a," ").concat(o[n],",")},"").slice(0,-1);return l.a.createElement("span",{className:"bar",title:s},l.a.createElement("span",{className:"verified",style:{width:"".concat(n,"%")}}),l.a.createElement("span",{className:"not_identifiable",style:{width:"".concat(a,"%")}}))},cloned_from:function(e){return l.a.createElement("span",{className:"cloned-from"},l.a.createElement("span",null,e.username)," / ",l.a.createElement("span",null,e.id))},has_clones:function(e){return l.a.createElement("span",{className:"has-clones"},e)}},k={agg_document:function(e){return e.author?"".concat(e.author,", ").concat(e.title):e.title}},C=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"createAggregateField",value:function(e,n){return l.a.createElement("a",{key:n,href:e,className:n.substring(4),style:{width:"".concat(100*Object(p.a)(Object(r.a)(t.prototype),"getWidth",this).call(this,n),"%")}},k[n](this.props.item))}},{key:"createField",value:function(e,n){var a=E[n],o=void 0!==this.props.item[n]?a?a(this.props.item[n]):this.props.item[n]:"";return l.a.createElement("a",{key:n,href:e,className:n,style:{width:"".concat(100*Object(p.a)(Object(r.a)(t.prototype),"getWidth",this).call(this,n),"%")}},o)}},{key:"render",value:function(){var e=this,t=this.props.item.filetypes[0],n="document/".concat(this.props.item.id,"/part/1/edit");return l.a.createElement("div",{className:"row".concat(this.props.selected?" selected":""),style:this.props.style,onClick:this.props.onClick},this.props.columns.map(function(t){return t.startsWith("agg_")?e.createAggregateField(n,t):e.createField(n,t)}),l.a.createElement("span",{className:"type icon ".concat(t)},l.a.createElement("img",{src:"/assets/images/".concat(b.a.get(t)),alt:"icon type ".concat(t)})))}}]),t}(y),O=n(59),_=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={title:n.props.item.title,editable:!1},n.makeEditable=function(e){n.setState({editable:!0},function(){return n._input.select()}),e.preventDefault(),e.stopPropagation()},n.onChange=function(e){n.setState({title:e.target.value})},n.onKeyPress=function(e){13===e.which&&n.setState({editable:!1},function(){return n.props.onRename(n.props.item,n.state.title)})},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.item.title,editable:!1})}},{key:"render",value:function(){var e=this;return l.a.createElement("a",{href:"#".concat(this.props.item.id),style:this.props.style,className:"row folder".concat(this.props.selected?" selected":""),onClick:this.props.onClick},l.a.createElement("span",{className:"folder-title"},this.state.editable?l.a.createElement("input",{ref:function(t){return e._input=t},value:this.state.title,onClick:this.makeEditable,onChange:this.onChange,onKeyDown:this.onKeyPress}):l.a.createElement("span",{className:"editable",onClick:this.makeEditable},this.state.title)),l.a.createElement("span",{className:"type icon"},"\uf07b"))}}]),t}(c.Component),N=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"column-labels"},this.props.columns.map(function(n){return l.a.createElement("span",{key:n,style:{width:"".concat(100*Object(p.a)(Object(r.a)(t.prototype),"getWidth",e).call(e,n),"%")},className:"label ".concat(n),onClick:e.props.onSort.bind(e,n)},l.a.createElement("span",{className:"inner-wrapper"},l.a.createElement("span",{className:"inner"},g.c[n]||n),e.props.sortColumn===n&&l.a.createElement("span",{className:"sort icon"},l.a.createElement("span",{className:"inner"},e.props.sortAsc?"\ue688":"\ue682"))))}))}}]),t}(y),w=n(54),j=n(31),S=Object(w.SortableElement)(function(e){var t=e.label;return l.a.createElement("div",{className:"card"},t)}),D=Object(w.SortableContainer)(function(e){var t=e.items;return l.a.createElement("div",{className:"column-order"},t.map(function(e,t){return l.a.createElement(S,{key:"card-".concat(t),index:t,label:g.c[e]})}))}),M=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(D,{items:this.props.items,onSortEnd:function(t){return e.props.onSortEnd(t.oldIndex,t.newIndex)}})}}]),t}(c.Component),A=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(r.a)(t).call(this,e))).state={columns:e.columns.slice(0)},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.columns!==this.props.columns&&this.setState({columns:e.columns.slice(0)})}},{key:"getCheckboxStates",value:function(e){var t=this,n={};return g.a.forEach(function(e){var a=t.state.columns.includes(e);n[e]=a}),n}},{key:"setAllRows",value:function(e){var t=this;e?function(){var e=g.a.filter(function(e){return!t.state.columns.includes(e)});t.setState({columns:t.state.columns.concat(e)})}():t.setState({columns:[]})}},{key:"onClickAll",value:function(){g.a.length===this.state.columns.length?this.setAllRows(!1):this.setAllRows(!0)}},{key:"toggleOne",value:function(e){this.setState(function(t){var n=t.columns.indexOf(e);return n<0?t.columns.push(e):t.columns.splice(n,1),t})}},{key:"onSort",value:function(e,t){this.setState({columns:Object(w.arrayMove)(this.state.columns,e,t)})}},{key:"render",value:function(){var e=this;return l.a.createElement(j.a,{className:"preferences",title:"Configure Columns",onClose:this.props.onCancel},l.a.createElement("div",{className:"scroll-pane"},l.a.createElement("div",{className:"selected-columns"},l.a.createElement("button",{className:"all nostyle",onClick:this.onClickAll.bind(this)},"All"),l.a.createElement("ul",null,g.a.map(function(t){return l.a.createElement("li",{key:t},l.a.createElement("input",{type:"checkbox",id:t,name:t,checked:e.state.columns.includes(t),onChange:e.toggleOne.bind(e,t)}),l.a.createElement("label",{htmlFor:t},g.c[t]))}))),l.a.createElement(M,{items:this.state.columns,onSortEnd:this.onSort.bind(this)})),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{className:"btn",onClick:this.props.onSave.bind(this,this.state.columns)},"Save"),l.a.createElement("button",{className:"btn outline",onClick:this.props.onCancel},"Cancel")))}}]),t}(c.Component),T=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={drag:!1,tablePreferencesOpen:!1},n.showPreferences=function(e){n.setState({tablePreferencesOpen:e})},n.onSavePreferences=function(e){n.setState({tablePreferencesOpen:!1}),n.props.onChangeColumnConfig(e)},n.sortBy=function(e){var t=n.props.config.sorting.by!==e||!n.props.config.sorting.asc;n.props.onSort({by:e,asc:t})},n.onDrag=function(e){n.setState({drag:e})},n.onDrop=function(e,t,a){var o=a.dataTransfer.getData("URL"),s=o?function(){var e=document.createElement("a");return e.href=o,e.hostname}():null;n.setState({drag:!1}),e.length>0?n.props.onDropFiles(e):o&&s!==window.location.hostname&&n.props.onDropSourceURL(o)},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"rowRenderer",value:function(){var e=this;return function(t){var n=e.props.items[t.index],a=e.props.selection&&e.props.selection.includes(n);return"FOLDER"===n.type?l.a.createElement(_,{key:t.key,style:t.style,item:n,selected:a,onClick:function(a){return e.onRowClick(a,n,t.index)},onRename:e.props.onRenameFolder}):l.a.createElement(C,{key:t.key,style:t.style,columns:e.props.config.columns,item:n,selected:a,onClick:function(a){return e.onRowClick(a,n,t.index)}})}}},{key:"onRowClick",value:function(e,t,n){var a=this.props.selection&&this.props.selection.handleClick(e,t,n,this.props.items);a&&this.props.onSelect(a)}},{key:"render",value:function(){var e=this,t=l.a.createElement("div",{className:"documents-pane table-pane"},l.a.createElement(u.a,null,function(t){var n=t.height,a=t.width;return l.a.createElement(u.b,{className:"virtualized-list",width:a,height:n,rowCount:e.props.items.length,rowHeight:47,rowRenderer:e.rowRenderer()})}),this.state.drag&&l.a.createElement(O.a,null),this.props.busy&&l.a.createElement("div",{className:"busy-mask"}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"documents-table-header"},l.a.createElement(N,{columns:this.props.config.columns,sortColumn:this.props.config.sorting.by,sortAsc:this.props.config.sorting.asc,onSort:this.sortBy}),l.a.createElement("button",{className:"column-options-btn nostyle icon",onClick:function(){return e.showPreferences(!0)}},"\uf141")),this.props.enableFiledrop?l.a.createElement(m.a,{className:"dropzone",disableClick:!0,onDragEnter:function(){return e.onDrag(!0)},onDragLeave:function(){return e.onDrag(!1)},onDrop:this.onDrop},t):t,this.state.tablePreferencesOpen&&l.a.createElement(A,{columns:this.props.config.columns,onCancel:function(){return e.showPreferences(!1)},onSave:this.onSavePreferences}))}}]),t}(c.Component)},109:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(69),m=n(40),p=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.filetypes[0],t=this.props.fileCount>1;return l.a.createElement("a",{href:"document/".concat(this.props.id,"/part/1/edit"),className:"cell".concat(this.props.selected?" selected":""),onClick:this.props.onClick},l.a.createElement("div",{className:"inner"},l.a.createElement("div",{className:"item-wrapper".concat(t?" stacked":"")},t&&l.a.createElement("div",{className:"stack"}),l.a.createElement("div",{className:"document ".concat(e)},l.a.createElement("div",{className:"label"},this.props.title)))))}}]),t}(c.Component),d=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("a",{href:"#".concat(this.props.id),className:"cell".concat(this.props.selected?" selected":""),onClick:this.props.onClick},l.a.createElement("div",{className:"inner"},l.a.createElement("div",{className:"item-wrapper"},l.a.createElement("div",{className:"folder"},l.a.createElement("div",{className:"label"},this.props.title)))))}}]),t}(c.Component),h=n(59),f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={drag:!1},n.onDrag=function(e){n.setState({drag:e})},n.onDrop=function(e,t,a){var o=a.dataTransfer.getData("URL");n.setState({drag:!1}),e.length>0?n.props.onDropFiles(e):o&&n.props.onDropSourceURL(o)},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"onTileClick",value:function(e,t,n){var a=this.props.selection&&this.props.selection.handleClick(e,t,n,this.props.items);a&&this.props.onSelect(a)}},{key:"rowRenderer",value:function(e){var t=this;return function(n){var a=n.index*e,o=Math.min(a+e,t.props.items.length)-a,s=new Array(o).fill(void 0).map(function(e,n){var o=n+a,s=t.props.items[o],r=t.props.selection&&t.props.selection.includes(s);return"FOLDER"===s.type?l.a.createElement(d,{key:o,id:s.id,title:s.title,selected:r,onClick:function(e){return t.onTileClick(e,s,o)}}):l.a.createElement(p,{key:o,id:s.id,title:s.title,filetypes:s.filetypes,fileCount:s.file_count,selected:r,onClick:function(e){return t.onTileClick(e,s,o)}})});return o<e&&s.push(new Array(e-o).fill(void 0).map(function(e,t){return l.a.createElement("div",{className:"cell dummy",key:"dummy-".concat(t)})})),l.a.createElement("div",{key:n.key,style:n.style,className:"row"},s)}}},{key:"render",value:function(){var e=this,t=l.a.createElement(m.a,null,function(t){var n=t.height,a=t.width,o=Math.floor(a/192),s=Math.ceil(e.props.items.length/o);return l.a.createElement(m.b,{className:"virtualized-grid",width:a,height:n,rowCount:s,rowHeight:192,rowRenderer:e.rowRenderer(o)})});return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"documents-pane grid-pane"},this.props.disableFiledrop?t:l.a.createElement(u.a,{className:"dropzone",disableClick:!0,onDragEnter:function(){return e.onDrag(!0)},onDragLeave:function(){return e.onDrag(!1)},onDrop:this.onDrop},t),this.state.drag&&l.a.createElement(h.a,null)))}}]),t}(c.Component)},23:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return u});var a=n(3),o=n(5),s=["owner","shared_by","access_level"],r=["author","title","language","date_freeform","uploaded_at","last_edit_at","last_edit_by","my_last_edit_at","annotations","my_annotations","public_visibility","status_ratio","cloned_from","has_clones"].concat(s),i={author:"Author",title:"Title",language:"Language",date_freeform:"Date",uploaded_at:"Uploaded at",last_edit_at:"Last edit",last_edit_by:"Last edit by",my_last_edit_at:"My last edit",annotations:"Annotations",my_annotations:"My annotations",public_visibility:"Visibility",status_ratio:"Verification ratio",cloned_from:"Cloned from",has_clones:"Has clones",owner:"Document owner",shared_by:"Shared by",access_level:"Access"},c={agg_document:"XL",author:"M",title:"L",language:"M",date_freeform:"M",uploaded_at:"M",last_edit_at:"M",last_edit_by:"M",my_last_edit_at:"M",annotations:"M",my_annotations:"M",public_visibility:"M",status_ratio:"M",cloned_from:"M",has_clones:"S",owner:"M",shared_by:"M",access_level:"M"},l={agg_document:["author","document"]},u=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,null,[{key:"getSpan",value:function(e){var t=c[e];return"XL"===t?6:"L"===t?4:"M"===t?2:"S"===t?1:void 0}},{key:"expandAggregatedColumns",value:function(e){return e.reduce(function(e,t){return t.startsWith("agg_")?e=e.concat(l[t]):e.push(t),e},[])}},{key:"filterByView",value:function(e,t){return"MY_DOCUMENTS"===t?e.filter(function(e){return!s.includes(e)}):e}}]),e}()},31:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(51),m=n.n(u),p=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"clicktrap ".concat(this.props.className)},l.a.createElement("div",{className:"modal-wrapper"},l.a.createElement(m.a,{handle:".modal-header"},l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h1",{className:"title"},this.props.title),l.a.createElement("button",{className:"close nostyle",onClick:this.props.onClose},"\ue897")),l.a.createElement("div",{className:"modal-body"},this.props.children)))))}}]),t}(c.Component)},39:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(3),o=n(5),s=function(){function e(t){var n=this;Object(a.a)(this,e),this.selectItem=function(t,a){if(a){var o=n._selection.indexOf(t),s=o>-1,r=n._selection.slice(0);return s?r.splice(o,1):r.push(t),new e(r)}return new e([t])},this.selectRange=function(t,a){var o=n._selection.map(function(e){return t.indexOf(e)}),s=Math.min.apply(null,o),r=Math.max.apply(null,o),i=a>r||a<s,c=function(e,n){return t.slice(e,n+1)};return new e(i&&a>r?c(s,a):i?c(a,r):c(s,a))},this._selection=t||[]}return Object(o.a)(e,[{key:"isEmpty",value:function(){return 0===this._selection.length}},{key:"includes",value:function(e){return this._selection.includes(e)}},{key:"isSingleSelection",value:function(){return 1===this._selection.length}},{key:"isSingleFolder",value:function(){return 1===this._selection.length&&"FOLDER"===this._selection[0].type}},{key:"isSingleDocument",value:function(){return 1===this._selection.length&&"DOCUMENT"===this._selection[0].type}},{key:"includesText",value:function(){return this._selection.filter(function(e){return e.filetypes&&e.filetypes.find(function(e){return e.startsWith("TEXT")})}).length>0}},{key:"get",value:function(e){return this._selection[e]}},{key:"getItems",value:function(){return this._selection}},{key:"getFolders",value:function(){return this._selection.filter(function(e){return"FOLDER"===e.type})}},{key:"getDocuments",value:function(){return this._selection.filter(function(e){return"DOCUMENT"===e.type})}},{key:"handleClick",value:function(e,t,n,a){var o=e.getModifierState("Shift"),s=e.getModifierState("Control");if(o||s||!this.includes(t)){var r=o?this.selectRange(a,n):this.selectItem(t,s);return e.preventDefault(),r}}}]),e}()},58:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"stringToHslColor",value:function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t%360}},{key:"render",value:function(){var e=this.props.username?"hsl(".concat(this.stringToHslColor(this.props.username),", 35%, 65%)"):"#e2e2e2";return l.a.createElement("div",{className:"avatar",style:{backgroundColor:e}},l.a.createElement("div",{className:"inner"},this.props.username&&this.props.username.charAt(0).toUpperCase()))}}]),t}(c.Component)},59:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(3),o=n(5),s=n(6),r=n(4),i=n(7),c=n(0),l=n.n(c),u=n(148).a.div({open:{bottom:"30px",transition:{ease:"easeOut",duration:200}},closed:{bottom:"-140px"}}),m=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={visible:!1},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){return l.a.createElement("div",{className:"filedrop-hint"},l.a.createElement(u,{className:"inner",pose:this.state.visible?"open":"closed"},l.a.createElement("span",{className:"icon"},"\uf0ee"),l.a.createElement("p",{className:"instructions"},"Drop files or IIIF manifest URLs to add them to your workspace."),l.a.createElement("p",{className:"supported"},"Supported formats: plain text (UTF-8), TEI/XML, image files, CSV (UTF-8)")))}}]),t}(c.Component)},703:function(e,t,n){e.exports=n(707)},704:function(e,t,n){},707:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return I});var a=n(22),o=n(3),s=n(5),r=n(6),i=n(4),c=n(7),l=n(0),u=n.n(l),m=n(13),p=n(10),d=n.n(p),h=n(23),f=n(31),v=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={errorMessage:null},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Promise(function(t){setTimeout(function(){return t()},e.props.minWait)}),n=d.a.post("/api/clone/document/".concat(this.props.documentId)).catch(function(t){throw 409===t.response.status?e.setState({errorMessage:"Oops. Could not create copy - the document exceeds your storage quota."}):e.setState({errorMessage:"Ooops. Something went wrong."}),t});Promise.all([t,n]).then(function(){e.props.onComplete()})}},{key:"render",value:function(){return u.a.createElement(f.a,{className:"now-forking"},u.a.createElement("h2",null,"Cloning Document"),u.a.createElement("div",{className:this.state.errorMessage?"error-icon":"wait-spinner"}),this.state.errorMessage?u.a.createElement("div",null,u.a.createElement("p",{className:"error"},this.state.errorMessage),u.a.createElement("button",{className:"btn red",onClick:this.props.onComplete},"Close")):u.a.createElement("p",null,"Please wait while I'm creating a copy in your workspace."))}}]),t}(l.Component),b=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={message:""},n.onChange=function(e){n.setState({message:e.target.value})},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement(f.a,{className:"message-form-container",title:"Send Message",onClose:this.props.onCancel},u.a.createElement("div",null,u.a.createElement("dl",null,u.a.createElement("dt",null,u.a.createElement("label",{htmlFor:"recipient"},"To")),u.a.createElement("dd",null,u.a.createElement("input",{disabled:!0,type:"text",id:"recipient",value:this.props.recipient}))),u.a.createElement("dl",null,u.a.createElement("dt",null,u.a.createElement("label",{htmlFor:"message"},"Message")),u.a.createElement("dd",null,u.a.createElement("textarea",{rows:10,value:this.state.message,onChange:this.onChange}))),u.a.createElement("div",{className:"buttons"},u.a.createElement("button",{className:"btn outline small",onClick:this.props.onCancel},"Cancel"),u.a.createElement("button",{className:"btn small",onClick:function(){return e.props.onSend(e.state.message)}},"Send"))))}}]),t}(l.Component),g={forkDocument:function(e){return new Promise(function(t){var n=document.createElement("div");document.body.appendChild(n),Object(m.render)(u.a.createElement(v,{documentId:e,minWait:3e3,onComplete:function(){n.remove(),t()}}),n)})},sendMessage:function(e,t){return new Promise(function(e){var n=document.createElement("div");document.body.appendChild(n),Object(m.render)(u.a.createElement(b,{recipient:t,onSend:function(a){d.a.post("/api/send-message",{to:t,message:a}).then(function(){n.remove(),e()})},onCancel:function(){n.remove(),e()}}),n)})}},y=n(39),E={me:null,visitedAccount:null,presentation:"TABLE",page:{breadcrumbs:[],readme:null,total_count:0,items:[]},selection:new y.a,table_config:{columns:["author","title","language","date_freeform","uploaded_at","last_edit_at"],sorting:{by:null,asc:!0}},busy:!0},k=function(){var e={};return["view","presentation","table_config"].map(function(t){var n=localStorage.getItem("recogito.workspace.".concat(t));n&&(e[t]=JSON.parse(n))}),Object(a.a)({},E,e)},C=function(e,t){var n="recogito.workspace.".concat(e);localStorage.setItem(n,JSON.stringify(t))},O=n(103),_=n(68),N=n(109),w=n(87),j=n(104),S=n(106),D=n(105),M=n(107),A=function(e){return u.a.createElement("div",{className:"sidebar"},u.a.createElement("div",{className:"section identity"},u.a.createElement(D.a,{account:e.account})),e.me&&e.me.feature_toggles&&e.me.feature_toggles.includes("send-message")&&u.a.createElement("div",{className:"section send-message"},u.a.createElement("button",{className:"btn",onClick:e.onSendMessage},u.a.createElement("span",{className:"icon"},"\uf0e0"),u.a.createElement("span",{className:"label"},"Send Message"))),u.a.createElement(S.a,{className:"section",width:237,height:55,fill:"#4483c4",stats:e.account&&e.account.stats}),u.a.createElement(M.a,{className:"section collaborators",title:"Top collaborators",username:e.account&&e.account.username}))},T=n(108),L=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"notLoggedIn",value:function(){return u.a.createElement("div",{className:"not logged-in"},u.a.createElement("a",{href:"/login"},"Log in"),"\xa0 | \xa0New to Recogito? \xa0",u.a.createElement("a",{href:"/"},"Learn more"))}},{key:"loggedInAs",value:function(){var e=this.props.me.real_name?this.props.me.real_name:this.props.me.username;return u.a.createElement("div",{className:"logged-in"},"Logged in as ",u.a.createElement("a",{href:"/".concat(this.props.me.username)},e))}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"top-bar"},u.a.createElement("div",{className:"top-left"},u.a.createElement("a",{href:"/my",className:"home"},u.a.createElement("img",{src:"/assets/images/logo-recogito-small.png",alt:"Recogito logo"})),this.props.me&&this.props.me.logged_in&&u.a.createElement("a",{href:"/my"},"My Workspace"),u.a.createElement("a",{href:"/help"},"Help"),u.a.createElement("a",{href:"/help/about"},"About")),u.a.createElement("div",{className:"top-right"},this.props.me&&this.props.me.logged_in?this.loggedInAs():this.notLoggedIn())))}}]),t}(l.Component),R=function(e){var t=e.selection.isSingleDocument()&&"PUBLIC"===e.selection.get(0).public_visibility;return u.a.createElement(u.a.Fragment,null,u.a.createElement(L,{me:e.me}),u.a.createElement(A,{me:e.me,account:e.visitedAccount,onSendMessage:e.onSendMessage}),u.a.createElement("div",{className:"main-content"},u.a.createElement(O.a,{label:"Public Documents",path:e.page.breadcrumbs,docCount:e.page.total_docs}),u.a.createElement("div",{className:"main-header-icons"},u.a.createElement(_.CSSTransition,{in:t,timeout:200,classNames:"fork-button"},u.a.createElement("button",{className:"btn fork-button",onClick:e.onFork},u.a.createElement("span",{className:"icon"},"\uf126"),u.a.createElement("span",{className:"label"},"Clone to my workspace"))),u.a.createElement(w.a,{className:"presentation-toggle stroke7",icon:"TABLE"===e.presentation?"\ue645":"\ue636",onClick:e.onTogglePresentation})),e.visitedAccount&&e.page.readme&&u.a.createElement(j.a,{content:e.page.readme}),e.visitedAccount&&0===e.page.items.length&&u.a.createElement("div",{className:"no-public-documents"},e.visitedAccount.username," has not shared any documents yet"),e.visitedAccount&&e.page.items.length>0&&"TABLE"===e.presentation&&u.a.createElement(T.a,{items:e.page.items,config:e.tableConfig,selection:e.selection,busy:e.busy,enableFiledrop:!1,onSelect:e.onSelect,onSort:e.onSortTable,onChangeColumnConfig:e.onChangeColumnConfig}),e.visitedAccount&&e.page.items.length>0&&"GRID"===e.presentation&&u.a.createElement(N.a,{items:e.page.items,selection:e.selection,busy:e.busy,enableFiledrop:!1,onSelect:e.onSelect})))},I=(n(704),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(i.a)(t).call(this,e))).onKeydown=function(e){27===e.which?n.setState({selection:new y.a}):46!==e.which||n.state.selection.isEmpty()||n.deleteSelection()},n.onMousedown=function(e){!(document.querySelector(".documents-pane").contains(e.target)||document.querySelector(".main-header-icons").contains(e.target))&&n.setState({selection:new y.a})},n.refreshPage=function(){n.setState({busy:!0});var e=document.location.hash.substring(1),t=e?"".concat(n._profileOwner,"/").concat(e):"".concat(n._profileOwner),o="GRID"===n.state.presentation?null:{columns:h.b.expandAggregatedColumns(n.state.table_config.columns),sort:n.state.table_config.sorting.by?n.state.table_config.sorting:null};return d.a.post("/api/directory/".concat(t),o).then(function(e){var t=e.data,o=t.breadcrumbs,s=t.readme,r=t.total_count,i=t.items;n.setState(function(e){return{page:Object(a.a)({},e.page,{breadcrumbs:o,readme:s,total_count:r,items:i}),busy:!1}})})},n.togglePresentation=function(){n.setState(function(e){var t="TABLE"===e.presentation?"GRID":"TABLE";return C("presentation",t),{presentation:t}})},n.select=function(e){n.setState({selection:e})},n.sortTable=function(e){n.setState(function(t){var n=Object(a.a)({},t.table_config,{sorting:e});return C("table_config",n),{table_config:n}},function(){n.refreshPage()})},n.changeColumnConfig=function(e){n.setState(function(t){var n=Object(a.a)({},t.table_config,{columns:e});return C("table_config",n),{table_config:n}})},n.sendMessage=function(){var e=n.state.me.username,t=n.state.visitedAccount.username;g.sendMessage(e,t)},n.forkSelection=function(){var e=n.state.selection;if(n.setState({busy:!0}),e.isSingleDocument()){var t=e.get(0);g.forkDocument(t.id).then(function(){return n.setState({busy:!1})})}},n.state=k(),n._profileOwner=window.location.pathname.substring(1),n._rootEl=document.getElementById("app"),window.onhashchange=n.refreshPage,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._rootEl.addEventListener("keydown",this.onKeydown,!1),this._rootEl.addEventListener("mousedown",this.onMousedown,!1);var t=d.a.get("/api/account/".concat(this._profileOwner)).then(function(t){e.setState({visitedAccount:t.data})}),n=d.a.get("/api/me").then(function(t){e.setState({me:t.data})});Promise.all([t,n]).then(function(){return e.refreshPage()})}},{key:"componentWillUnmount",value:function(){this._rootEl.removeEventListener("keydown",this.onKeydown,!1),this._rootEl.removeEventListener("mousedown",this.onMousedown,!1)}},{key:"render",value:function(){return u.a.createElement(R,{me:this.state.me,visitedAccount:this.state.visitedAccount,presentation:this.state.presentation,page:this.state.page,tableConfig:this.state.table_config,selection:this.state.selection,busy:this.state.busy,onTogglePresentation:this.togglePresentation,onSelect:this.select,onSort:this.sortTable,onChangeColumnConfig:this.changeColumnConfig,onSendMessage:this.sendMessage,onFork:this.forkSelection})}}]),t}(l.Component));Object(m.render)(u.a.createElement(I,null),document.getElementById("app"))},77:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(3),o={TEXT_PLAIN:"icon_text.png",TEXT_TEIXML:"icon_tei.png",IMAGE_UPLOAD:"icon_image.png",IMAGE_IIIF:"icon_iiif.png",DATA_CSV:"icon_csv.png",MAP_WMTS:"icon_map.png",MAP_XYZ:"icon_map.png"},s=function e(){Object(a.a)(this,e)};s.get=function(e){return o[e]}},87:function(e,t,n){"use strict";var a=n(0),o=n.n(a);t.a=function(e){return o.a.createElement("div",{className:"header-icon ".concat(e.className),onClick:e.onClick},e.link?o.a.createElement("a",{href:e.link,className:"icon inner"},e.icon):o.a.createElement("span",{className:"icon inner"},e.icon))}}},[[703,2,0]]]);
//# sourceMappingURL=profile.92caba6b.chunk.js.map